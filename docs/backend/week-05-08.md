# Week 5-8: ìƒí’ˆ ë° ì¹´í…Œê³ ë¦¬ ê´€ë¦¬

**ê¸°ê°„**: Week 5-8
**ëª©í‘œ**: ìƒí’ˆ CRUD, ì¹´í…Œê³ ë¦¬ ê´€ë¦¬, ê²€ìƒ‰/í•„í„°ë§, AWS S3 ì´ë¯¸ì§€ ì—…ë¡œë“œ
**ê¸°ìˆ  ìŠ¤íƒ**: Spring Data JPA, JPA Specification, AWS SDK for Java, Lombok
**í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™**: Week 8ë¶€í„° ì‹œì‘

---

## ğŸ“‹ Issue Tickets

### [BE-021] Category Entity ë° Repository êµ¬í˜„

**Priority**: ğŸ”´ Critical
**Estimated Time**: 4 hours

#### Description

ì¹´í…Œê³ ë¦¬ ê³„ì¸µ êµ¬ì¡°(ë¶€ëª¨-ìì‹ ê´€ê³„)ë¥¼ ì§€ì›í•˜ëŠ” JPA Entityì™€ Repositoryë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. ì¹´í…Œê³ ë¦¬ëŠ” ìµœëŒ€ 3ë‹¨ê³„ ê¹Šì´ê¹Œì§€ ì§€ì›í•˜ë©°, ê° ì¹´í…Œê³ ë¦¬ëŠ” í™œì„±/ë¹„í™œì„± ìƒíƒœì™€ í‘œì‹œ ìˆœì„œë¥¼ ê°€ì§‘ë‹ˆë‹¤.

#### Functional Requirements

**1. Category Entity ì„¤ê³„**
ë‹¤ìŒ í•„ë“œë¥¼ í¬í•¨í•˜ëŠ” Category Entityë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**í•„ìˆ˜ í•„ë“œ:**

- id (Long, PK, Auto Increment)
- name (String, NOT NULL, max 100ì) - ì¹´í…Œê³ ë¦¬ ì´ë¦„
- slug (String, UNIQUE, NOT NULL, max 100ì) - URL ì¹œí™”ì  ì‹ë³„ì
- description (String, TEXT) - ì¹´í…Œê³ ë¦¬ ì„¤ëª…
- displayOrder (Integer, default 0) - í‘œì‹œ ìˆœì„œ (ì‘ì„ìˆ˜ë¡ ì•ì—)
- isActive (Boolean, default true) - í™œì„± ìƒíƒœ
- createdAt (LocalDateTime, Auto)
- updatedAt (LocalDateTime, Auto)

**ìê¸° ì°¸ì¡° ê´€ê³„:**

- parent (Category, Many-to-One, nullable) - ë¶€ëª¨ ì¹´í…Œê³ ë¦¬
- children (List<Category>, One-to-Many, mappedBy="parent") - ìì‹ ì¹´í…Œê³ ë¦¬ ëª©ë¡

**ì—°ê´€ ê´€ê³„ ì„¤ì •:**

- @ManyToOne(fetch = FetchType.LAZY) for parent
- @OneToMany(mappedBy = "parent", cascade = CascadeType.ALL) for children
- @JoinColumn(name = "parent_id")

**2. BaseEntity ì¶”ìƒ í´ë˜ìŠ¤**
ëª¨ë“  Entityê°€ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•  BaseEntityë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

- createdAt, updatedAt í•„ë“œ í¬í•¨
- @MappedSuperclass ì–´ë…¸í…Œì´ì…˜
- @EntityListeners(AuditingEntityListener.class)
- @CreatedDate, @LastModifiedDate ì‚¬ìš©

**JPA Auditing í™œì„±í™”:**

- Application í´ë˜ìŠ¤ ë˜ëŠ” Config í´ë˜ìŠ¤ì— @EnableJpaAuditing ì¶”ê°€

**3. CategoryRepository ì¸í„°í˜ì´ìŠ¤**
JpaRepositoryë¥¼ í™•ì¥í•˜ê³  ë‹¤ìŒ ì»¤ìŠ¤í…€ ì¿¼ë¦¬ ë©”ì„œë“œë¥¼ ì •ì˜í•©ë‹ˆë‹¤:

**ê¸°ë³¸ ì¿¼ë¦¬ ë©”ì„œë“œ:**

- findBySlug(String slug): Optional<Category> - slugë¡œ ì¡°íšŒ
- findByParentIsNullAndIsActiveTrue(): List<Category> - ìµœìƒìœ„ í™œì„± ì¹´í…Œê³ ë¦¬ ì¡°íšŒ
- findByParentIdAndIsActiveTrue(Long parentId): List<Category> - íŠ¹ì • ë¶€ëª¨ì˜ í™œì„± ìì‹ ì¡°íšŒ

**JPQL ì¿¼ë¦¬:**

- findRootCategoriesWithChildren(): List<Category>
  - LEFT JOIN FETCHë¥¼ ì‚¬ìš©í•˜ì—¬ N+1 ë¬¸ì œ ë°©ì§€
  - parent IS NULL AND isActive = true ì¡°ê±´
  - ORDER BY displayOrder

**4. ì¸ë±ìŠ¤ ì„¤ì •**
ë‹¤ìŒ ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ ì¶”ê°€:

- idx_categories_parent_id: parent_id
- idx_categories_slug: slug

**5. ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™**

- ì¹´í…Œê³ ë¦¬ ê¹Šì´ëŠ” ìµœëŒ€ 3ë‹¨ê³„ë¡œ ì œí•œ (ê²€ì¦ ë¡œì§ í•„ìš”)
- slugëŠ” ì˜ë¬¸, ìˆ«ì, í•˜ì´í”ˆ(-)ë§Œ í—ˆìš©
- ë¶€ëª¨ ì¹´í…Œê³ ë¦¬ê°€ ë¹„í™œì„±í™”ë˜ë©´ ìì‹ ì¹´í…Œê³ ë¦¬ë„ ìë™ ë¹„í™œì„±í™” ê³ ë ¤

#### API Endpoints

í•´ë‹¹ ì—†ìŒ (Entity ë° Repository ì„¤ì •)

#### Error Handling

- ì¤‘ë³µ slug: DataIntegrityViolationException ë°œìƒ

#### Acceptance Criteria

- [x] Category Entityê°€ parent-children ì–‘ë°©í–¥ ê´€ê³„ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë§¤í•‘í•¨
- [x] BaseEntityë¥¼ ìƒì†ë°›ì•„ createdAt, updatedAtì´ ìë™ ì„¤ì •ë¨
- [x] CategoryRepositoryì˜ ëª¨ë“  ì¿¼ë¦¬ ë©”ì„œë“œê°€ ì •ìƒ ë™ì‘í•¨
- [x] Lazy Loadingì´ ì ìš©ë˜ì–´ N+1 ë¬¸ì œ ì—†ìŒ
- [x] JPA Auditingì´ í™œì„±í™”ë˜ì–´ ì‹œê°„ í•„ë“œê°€ ìë™ ê´€ë¦¬ë¨

---

### [BE-022] Product ë° ProductImage Entity êµ¬í˜„

**Priority**: ğŸ”´ Critical
**Estimated Time**: 6 hours

#### Description

ìƒí’ˆ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” Product Entityì™€ ìƒí’ˆ ì´ë¯¸ì§€ë¥¼ ê´€ë¦¬í•˜ëŠ” ProductImage Entityë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. í•œ ìƒí’ˆì€ ì—¬ëŸ¬ ê°œì˜ ì´ë¯¸ì§€ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©°, ì²« ë²ˆì§¸ ì´ë¯¸ì§€ê°€ ëŒ€í‘œ ì´ë¯¸ì§€ì…ë‹ˆë‹¤.

#### Functional Requirements

**1. Product Entity ì„¤ê³„**
ë‹¤ìŒ í•„ë“œë¥¼ í¬í•¨í•˜ëŠ” Product Entityë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**ê¸°ë³¸ ì •ë³´:**

- id (Long, PK, Auto Increment)
- name (String, NOT NULL, max 255ì) - ìƒí’ˆëª…
- slug (String, UNIQUE, NOT NULL, max 255ì) - URL ì¹œí™”ì  ì‹ë³„ì
- description (TEXT) - ìƒí’ˆ ì„¤ëª…

**ê°€ê²© ì •ë³´ (BigDecimal, precision=10, scale=2):**

- price (NOT NULL) - ì •ê°€
- salePrice (nullable) - í• ì¸ê°€
- wholesalePrice (nullable) - ë„ë§¤ê°€ (ë„ë§¤ íšŒì› ì „ìš©)

**ì¬ê³  ë° ì†ì„±:**

- stockQuantity (Integer, default 0) - ì¬ê³  ìˆ˜ëŸ‰
- origin (String, max 100ì) - ì›ì‚°ì§€ (ì˜ˆ: "ê°•ì›ë„ ì–‘ì–‘")
- grade (String, max 50ì) - ë“±ê¸‰ (ì˜ˆ: "íŠ¹", "ìƒ", "ì¤‘")
- weight (String, max 50ì) - ì¤‘ëŸ‰ (ì˜ˆ: "500g", "1kg")
- packaging (String, max 100ì) - í¬ì¥ ë‹¨ìœ„ (ì˜ˆ: "ì„ ë¬¼ìš© ë°•ìŠ¤")

**í”Œë˜ê·¸ (Boolean):**

- isFeatured (default false) - ì¶”ì²œ ìƒí’ˆ ì—¬ë¶€
- isNew (default false) - ì‹ ìƒí’ˆ ì—¬ë¶€
- isBest (default false) - ë² ìŠ¤íŠ¸ ìƒí’ˆ ì—¬ë¶€
- isActive (default true) - í™œì„± ìƒíƒœ

**í†µê³„ ì •ë³´:**

- viewCount (Integer, default 0) - ì¡°íšŒìˆ˜
- soldCount (Integer, default 0) - íŒë§¤ëŸ‰
- ratingAverage (BigDecimal, precision=3, scale=2, default 0) - í‰ê·  í‰ì 
- reviewCount (Integer, default 0) - ë¦¬ë·° ìˆ˜

**Timestamps:**

- createdAt, updatedAt (BaseEntity ìƒì†)

**ì—°ê´€ ê´€ê³„:**

- category (Category, Many-to-One, Lazy)
- images (List<ProductImage>, One-to-Many, mappedBy="product", cascade=ALL, orphanRemoval=true)
  - @OrderBy("displayOrder ASC") ì‚¬ìš©í•˜ì—¬ ìë™ ì •ë ¬

**í—¬í¼ ë©”ì„œë“œ:**

- addImage(ProductImage image): ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ í¸ì˜ ë©”ì„œë“œ
- incrementViewCount(): ì¡°íšŒìˆ˜ ì¦ê°€

**2. ProductImage Entity ì„¤ê³„**
ë‹¤ìŒ í•„ë“œë¥¼ í¬í•¨í•˜ëŠ” ProductImage Entityë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**í•„ë“œ:**

- id (Long, PK, Auto Increment)
- product (Product, Many-to-One, NOT NULL, Lazy)
- imageUrl (String, TEXT, NOT NULL) - S3 URL
- altText (String, max 255ì) - ì´ë¯¸ì§€ ëŒ€ì²´ í…ìŠ¤íŠ¸
- displayOrder (Integer, default 0) - í‘œì‹œ ìˆœì„œ (0ì´ ëŒ€í‘œ ì´ë¯¸ì§€)
- createdAt (BaseEntity ìƒì†)

**ì—°ê´€ ê´€ê³„:**

- @ManyToOne(fetch = FetchType.LAZY)
- @JoinColumn(name = "product_id", nullable = false)

**3. ProductRepository ì¸í„°í˜ì´ìŠ¤**
JpaRepositoryë¥¼ í™•ì¥í•˜ê³  ë‹¤ìŒ ì¿¼ë¦¬ ë©”ì„œë“œë¥¼ ì •ì˜í•©ë‹ˆë‹¤:

**ê¸°ë³¸ ì¡°íšŒ:**

- findBySlug(String slug): Optional<Product>
- findByIsActiveTrue(Pageable pageable): Page<Product> - í™œì„± ìƒí’ˆ ëª©ë¡

**ì¹´í…Œê³ ë¦¬ë³„ ì¡°íšŒ:**

- findByCategoryIdAndIsActiveTrue(Long categoryId, Pageable pageable): Page<Product>

**íŠ¹ìˆ˜ ì¹´í…Œê³ ë¦¬ ì¡°íšŒ:**

- findByIsFeaturedTrueAndIsActiveTrue(Pageable pageable): Page<Product>
- findByIsBestTrueAndIsActiveTrue(Pageable pageable): Page<Product>
- findByIsNewTrueAndIsActiveTrue(Pageable pageable): Page<Product>

**ê²€ìƒ‰ (JPQL):**

- searchByKeyword(@Param("keyword") String keyword, Pageable pageable): Page<Product>
  - ìƒí’ˆëª… ë˜ëŠ” ì„¤ëª…ì— í‚¤ì›Œë“œ í¬í•¨ (ëŒ€ì†Œë¬¸ì ë¬´ì‹œ)
  - LOWER() í•¨ìˆ˜ ì‚¬ìš©
  - LIKE '%keyword%' íŒ¨í„´

**4. ì¸ë±ìŠ¤ ì„¤ì •**
ë‹¤ìŒ ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ ì¶”ê°€:

- idx_products_category_id: category_id
- idx_products_slug: slug
- idx_products_is_featured: is_featured
- idx_products_is_best: is_best
- idx_product_images_product_id: product_id (ProductImage í…Œì´ë¸”)

**5. ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™**

- ì²« ë²ˆì§¸ ì´ë¯¸ì§€(displayOrder=0)ê°€ ëŒ€í‘œ ì´ë¯¸ì§€
- ì¬ê³ ê°€ 0ì´ë©´ "í’ˆì ˆ" ìƒíƒœ (í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì²˜ë¦¬)
- salePriceê°€ ì„¤ì •ë˜ë©´ priceë³´ë‹¤ ì‘ì•„ì•¼ í•¨ (ê²€ì¦ ë¡œì§)
- ìƒí’ˆ ì‚­ì œ ì‹œ ì—°ê´€ëœ ì´ë¯¸ì§€ë„ í•¨ê»˜ ì‚­ì œ (orphanRemoval=true)

#### API Endpoints

í•´ë‹¹ ì—†ìŒ (Entity ë° Repository ì„¤ì •)

#### Error Handling

- ì¤‘ë³µ slug: DataIntegrityViolationException
- Category ì—†ìŒ: ForeignKeyConstraintViolationException

#### Acceptance Criteria

- [x] Product Entityê°€ Categoryì™€ ì˜¬ë°”ë¥´ê²Œ ì—°ê´€ë¨ (Lazy Loading)
- [x] ProductImage ì–‘ë°©í–¥ ê´€ê³„ê°€ ì •ìƒ ë™ì‘í•¨ (cascade, orphanRemoval)
- [x] ProductRepositoryì˜ ëª¨ë“  ì¿¼ë¦¬ ë©”ì„œë“œê°€ ì •ìƒ ë™ì‘í•¨
- [x] í˜ì´ì§€ë„¤ì´ì…˜ì´ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•¨
- [x] ê²€ìƒ‰ ì¿¼ë¦¬ê°€ ëŒ€ì†Œë¬¸ì ë¬´ì‹œí•˜ê³  ë™ì‘í•¨
- [x] N+1 ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠìŒ

---

### [BE-023] Category ì¡°íšŒ API êµ¬í˜„

**Priority**: ğŸ”´ Critical
**Estimated Time**: 6 hours

#### Description

ì¹´í…Œê³ ë¦¬ ê³„ì¸µ êµ¬ì¡°ë¥¼ ì¡°íšŒí•˜ëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. ê´€ë¦¬ììš© CUD(Create, Update, Delete) APIëŠ” ì¶”í›„ êµ¬í˜„í•˜ë©°, í˜„ì¬ëŠ” ì¡°íšŒ APIë§Œ êµ¬í˜„í•©ë‹ˆë‹¤.

#### Functional Requirements

**1. CategoryResponse DTO**
Category Entityë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜í•˜ê¸° ìœ„í•œ DTOë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**í•„ë“œ:**

- id (Long)
- name (String)
- slug (String)
- description (String)
- parentId (Long, nullable) - ë¶€ëª¨ ì¹´í…Œê³ ë¦¬ ID
- displayOrder (Integer)
- children (List<CategoryResponse>) - ìì‹ ì¹´í…Œê³ ë¦¬ ëª©ë¡ (ì¬ê·€ êµ¬ì¡°)

**ë³€í™˜ ë©”ì„œë“œ:**

- static CategoryResponse from(Category category): Entityë¥¼ DTOë¡œ ë³€í™˜
- ìì‹ ì¹´í…Œê³ ë¦¬ë„ ì¬ê·€ì ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ê³„ì¸µ êµ¬ì¡° ìœ ì§€

**2. CategoryService**
ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” Service í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**ë©”ì„œë“œ:**

- getAllCategories(): List<CategoryResponse>
  - ìµœìƒìœ„ ì¹´í…Œê³ ë¦¬ì™€ ëª¨ë“  í•˜ìœ„ ì¹´í…Œê³ ë¦¬ë¥¼ ê³„ì¸µ êµ¬ì¡°ë¡œ ë°˜í™˜
  - CategoryRepository.findRootCategoriesWithChildren() ì‚¬ìš©
  - ê° Categoryë¥¼ CategoryResponseë¡œ ë³€í™˜

- getCategoryById(Long id): CategoryResponse
  - IDë¡œ íŠ¹ì • ì¹´í…Œê³ ë¦¬ ì¡°íšŒ
  - ì¹´í…Œê³ ë¦¬ ì—†ìŒ ì‹œ NotFoundException ë°œìƒ

- getCategoryBySlug(String slug): CategoryResponse
  - slugë¡œ ì¹´í…Œê³ ë¦¬ ì¡°íšŒ
  - ì¹´í…Œê³ ë¦¬ ì—†ìŒ ì‹œ NotFoundException ë°œìƒ

**íŠ¸ëœì­ì…˜ ì„¤ì •:**

- @Transactional(readOnly = true) - ì¡°íšŒ ì„±ëŠ¥ ìµœì í™”

**3. CategoryController**
REST API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì œê³µí•˜ëŠ” Controllerë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„:**

**GET /api/categories - ì „ì²´ ì¹´í…Œê³ ë¦¬ ê³„ì¸µ êµ¬ì¡° ì¡°íšŒ**

- ì¸ì¦ ë¶ˆí•„ìš”
- categoryService.getAllCategories() í˜¸ì¶œ
- ApiResponse<List<CategoryResponse>> í˜•íƒœë¡œ ë°˜í™˜
- Swagger @Operation: summary="Get all categories", description="ì¹´í…Œê³ ë¦¬ ê³„ì¸µ êµ¬ì¡° ì „ì²´ ì¡°íšŒ"

**GET /api/categories/{id} - íŠ¹ì • ì¹´í…Œê³ ë¦¬ ì¡°íšŒ**

- Path Variable: id (Long)
- categoryService.getCategoryById(id) í˜¸ì¶œ
- ApiResponse<CategoryResponse> í˜•íƒœë¡œ ë°˜í™˜

**GET /api/categories/slug/{slug} - slugë¡œ ì¹´í…Œê³ ë¦¬ ì¡°íšŒ**

- Path Variable: slug (String)
- categoryService.getCategoryBySlug(slug) í˜¸ì¶œ
- ApiResponse<CategoryResponse> í˜•íƒœë¡œ ë°˜í™˜

**4. ApiResponse ê³µí†µ ì‘ë‹µ DTO**
ëª¨ë“  API ì‘ë‹µì— ì‚¬ìš©í•  ê³µí†µ DTOë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**í•„ë“œ:**

- success (boolean) - ì„±ê³µ ì—¬ë¶€
- data (T, Generic) - ì‘ë‹µ ë°ì´í„°
- message (String, optional) - ë©”ì‹œì§€

**Static íŒ©í† ë¦¬ ë©”ì„œë“œ:**

- success(T data): ApiResponse<T> - ì„±ê³µ ì‘ë‹µ (message null)
- success(T data, String message): ApiResponse<T> - ì„±ê³µ ì‘ë‹µ (message í¬í•¨)
- error(String message): ApiResponse<T> - ì—ëŸ¬ ì‘ë‹µ (data null)

**5. Swagger ë¬¸ì„œí™”**
ê° ì—”ë“œí¬ì¸íŠ¸ì— @Operation, @ApiResponse ì–´ë…¸í…Œì´ì…˜ ì¶”ê°€

#### API Endpoints

| Method | Endpoint                    | Description             | Auth Required |
| ------ | --------------------------- | ----------------------- | ------------- |
| GET    | /api/categories             | ì¹´í…Œê³ ë¦¬ ê³„ì¸µ êµ¬ì¡° ì¡°íšŒ | No            |
| GET    | /api/categories/{id}        | íŠ¹ì • ì¹´í…Œê³ ë¦¬ ì¡°íšŒ      | No            |
| GET    | /api/categories/slug/{slug} | slugë¡œ ì¹´í…Œê³ ë¦¬ ì¡°íšŒ    | No            |

#### Error Handling

- ì¹´í…Œê³ ë¦¬ ì—†ìŒ: 404 NOT_FOUND, "CATEGORY_NOT_FOUND"

#### Acceptance Criteria

- [x] GET /api/categories í˜¸ì¶œ ì‹œ ì „ì²´ ê³„ì¸µ êµ¬ì¡°ê°€ JSONìœ¼ë¡œ ë°˜í™˜ë¨
- [x] ìì‹ ì¹´í…Œê³ ë¦¬ê°€ children ë°°ì—´ì— ì¬ê·€ì ìœ¼ë¡œ í¬í•¨ë¨
- [x] GET /api/categories/{id} í˜¸ì¶œ ì‹œ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì™€ ìì‹ë“¤ì´ ë°˜í™˜ë¨
- [x] GET /api/categories/slug/{slug} í˜¸ì¶œ ì‹œ slugì— í•´ë‹¹í•˜ëŠ” ì¹´í…Œê³ ë¦¬ ë°˜í™˜
- [x] ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì¹´í…Œê³ ë¦¬ ì¡°íšŒ ì‹œ 404 ì—ëŸ¬ ë°˜í™˜
- [x] Swagger UIì—ì„œ API í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- [x] N+1 ë¬¸ì œ ì—†ì´ í•œ ë²ˆì˜ ì¿¼ë¦¬ë¡œ ê³„ì¸µ êµ¬ì¡° ì¡°íšŒ

---

### [BE-024] Product ì¡°íšŒ API êµ¬í˜„

**Priority**: ğŸ”´ Critical
**Estimated Time**: 8 hours

#### Description

ìƒí’ˆ ëª©ë¡ ë° ìƒì„¸ ì¡°íšŒ APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. í˜ì´ì§€ë„¤ì´ì…˜, ì •ë ¬, ì¹´í…Œê³ ë¦¬ë³„ ì¡°íšŒ, íŠ¹ìˆ˜ ì¹´í…Œê³ ë¦¬ ì¡°íšŒ(ë² ìŠ¤íŠ¸, ì‹ ìƒí’ˆ), ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

#### Functional Requirements

**1. ProductResponse DTO**
Product Entityë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜í•˜ê¸° ìœ„í•œ DTOë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**í•„ë“œ:**

- id, name, slug, description
- price, salePrice, wholesalePrice
- stockQuantity, origin, grade, weight, packaging
- isFeatured, isNew, isBest
- viewCount, ratingAverage, reviewCount
- categoryId, categoryName (Category ì •ë³´)
- images (List<ProductImageResponse>) - ì´ë¯¸ì§€ ëª©ë¡
- createdAt

**ProductImageResponse DTO:**

- id, imageUrl, altText, displayOrder

**ë³€í™˜ ë©”ì„œë“œ:**

- static ProductResponse from(Product product): Entity â†’ DTO ë³€í™˜
- ProductImageë„ ProductImageResponseë¡œ ë³€í™˜
- Category ì •ë³´ ì¶”ì¶œ (categoryId, categoryName)

**2. ProductService**
ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” Service í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**ë©”ì„œë“œ:**

**getProducts(Pageable pageable): Page<ProductResponse>**

- ëª¨ë“  í™œì„± ìƒí’ˆ ì¡°íšŒ (í˜ì´ì§€ë„¤ì´ì…˜)
- ProductRepository.findByIsActiveTrue(pageable) ì‚¬ìš©
- Page<Product>ë¥¼ Page<ProductResponse>ë¡œ ë³€í™˜

**getProductsByCategory(Long categoryId, Pageable pageable): Page<ProductResponse>**

- íŠ¹ì • ì¹´í…Œê³ ë¦¬ì˜ í™œì„± ìƒí’ˆ ì¡°íšŒ
- ProductRepository.findByCategoryIdAndIsActiveTrue() ì‚¬ìš©

**getProductById(Long id): ProductResponse**

- IDë¡œ ìƒí’ˆ ìƒì„¸ ì¡°íšŒ
- **ì¤‘ìš”**: ì¡°íšŒ ì‹œ viewCount 1 ì¦ê°€ (@Transactional í•„ìš”)
- Product.incrementViewCount() í˜¸ì¶œ
- ìƒí’ˆ ì—†ìŒ ì‹œ NotFoundException ë°œìƒ

**getProductBySlug(String slug): ProductResponse**

- slugë¡œ ìƒí’ˆ ì¡°íšŒ
- viewCount ì¦ê°€ ì—†ì´ ì¡°íšŒ (slugëŠ” URLì—ì„œ ì‚¬ìš©, ì¤‘ë³µ ì¡°íšŒ ë°©ì§€)

**getFeaturedProducts(Pageable pageable): Page<ProductResponse>**

- isFeatured=trueì¸ ìƒí’ˆ ì¡°íšŒ

**getBestProducts(Pageable pageable): Page<ProductResponse>**

- isBest=trueì¸ ìƒí’ˆì„ soldCount ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì¡°íšŒ
- PageRequest.of(0, 16, Sort.by("soldCount").descending()) ì‚¬ìš©
- ê³ ì • 16ê°œ ë°˜í™˜

**getNewProducts(Pageable pageable): Page<ProductResponse>**

- isNew=trueì¸ ìƒí’ˆì„ createdAt ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì¡°íšŒ
- ê³ ì • 16ê°œ ë°˜í™˜

**searchProducts(String keyword, Pageable pageable): Page<ProductResponse>**

- í‚¤ì›Œë“œë¡œ ìƒí’ˆëª… ë˜ëŠ” ì„¤ëª…ì—ì„œ ê²€ìƒ‰
- ProductRepository.searchByKeyword() ì‚¬ìš©

**íŠ¸ëœì­ì…˜ ì„¤ì •:**

- @Transactional(readOnly = true) - ì¡°íšŒ ë©”ì„œë“œ (viewCount ì¦ê°€ ì œì™¸)
- @Transactional - getProductById (viewCount ì¦ê°€ í¬í•¨)

**3. ProductController**
REST API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì œê³µí•˜ëŠ” Controllerë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„:**

**GET /api/products - ìƒí’ˆ ëª©ë¡ ì¡°íšŒ**

- Query Parameters:
  - page (int, default: 0) - í˜ì´ì§€ ë²ˆí˜¸
  - size (int, default: 16) - í˜ì´ì§€ í¬ê¸°
  - sort (String, default: "createdAt,desc") - ì •ë ¬ (ì˜ˆ: "price,asc", "name,desc")
- Pageable ê°ì²´ ìƒì„± (createPageable í—¬í¼ ë©”ì„œë“œ)
- ApiResponse<Page<ProductResponse>> ë°˜í™˜

**GET /api/products/{id} - ìƒí’ˆ ìƒì„¸ ì¡°íšŒ**

- Path Variable: id (Long)
- ì¡°íšŒìˆ˜ ì¦ê°€
- ApiResponse<ProductResponse> ë°˜í™˜

**GET /api/products/slug/{slug} - slugë¡œ ìƒí’ˆ ì¡°íšŒ**

- Path Variable: slug (String)
- ì¡°íšŒìˆ˜ ì¦ê°€ ì—†ìŒ

**GET /api/products/category/{categoryId} - ì¹´í…Œê³ ë¦¬ë³„ ìƒí’ˆ ì¡°íšŒ**

- Path Variable: categoryId (Long)
- Query Parameters: page, size, sort
- í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ìƒí’ˆë§Œ í•„í„°ë§

**GET /api/products/featured - ì¶”ì²œ ìƒí’ˆ ì¡°íšŒ**

- Query Parameters: page, size
- isFeatured=trueì¸ ìƒí’ˆë§Œ ë°˜í™˜

**GET /api/products/best - ë² ìŠ¤íŠ¸ ìƒí’ˆ ì¡°íšŒ**

- ê³ ì • 16ê°œ ë°˜í™˜
- soldCount ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬

**GET /api/products/new - ì‹ ìƒí’ˆ ì¡°íšŒ**

- ê³ ì • 16ê°œ ë°˜í™˜
- createdAt ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬

**GET /api/products/search - í‚¤ì›Œë“œ ê²€ìƒ‰**

- Query Parameter: q (String, required) - ê²€ìƒ‰ í‚¤ì›Œë“œ
- Query Parameters: page, size
- ìƒí’ˆëª… ë˜ëŠ” ì„¤ëª…ì— í‚¤ì›Œë“œ í¬í•¨ëœ ìƒí’ˆ ë°˜í™˜

**í—¬í¼ ë©”ì„œë“œ:**

- createPageable(int page, int size, String sort): Pageable
  - sort ë¬¸ìì—´ì„ íŒŒì‹±í•˜ì—¬ Pageable ìƒì„±
  - "field,direction" í˜•ì‹ íŒŒì‹± (ì˜ˆ: "price,asc")

**4. Swagger ë¬¸ì„œí™”**
ê° ì—”ë“œí¬ì¸íŠ¸ì— @Operation, @ApiResponse, @Parameter ì–´ë…¸í…Œì´ì…˜ ì¶”ê°€

#### API Endpoints

| Method | Endpoint                            | Description      | Auth Required |
| ------ | ----------------------------------- | ---------------- | ------------- |
| GET    | /api/products                       | ìƒí’ˆ ëª©ë¡ ì¡°íšŒ   | No            |
| GET    | /api/products/{id}                  | ìƒí’ˆ ìƒì„¸ ì¡°íšŒ   | No            |
| GET    | /api/products/slug/{slug}           | slugë¡œ ìƒí’ˆ ì¡°íšŒ | No            |
| GET    | /api/products/category/{categoryId} | ì¹´í…Œê³ ë¦¬ë³„ ìƒí’ˆ  | No            |
| GET    | /api/products/featured              | ì¶”ì²œ ìƒí’ˆ ì¡°íšŒ   | No            |
| GET    | /api/products/best                  | ë² ìŠ¤íŠ¸ ìƒí’ˆ 16ê°œ | No            |
| GET    | /api/products/new                   | ì‹ ìƒí’ˆ 16ê°œ      | No            |
| GET    | /api/products/search                | í‚¤ì›Œë“œ ê²€ìƒ‰      | No            |

#### Error Handling

- ìƒí’ˆ ì—†ìŒ: 404 NOT_FOUND, "PRODUCT_NOT_FOUND"
- ì˜ëª»ëœ í˜ì´ì§€ ë²ˆí˜¸: ë¹ˆ í˜ì´ì§€ ë°˜í™˜ (ì—ëŸ¬ ì•„ë‹˜)

#### Acceptance Criteria

- [x] GET /api/products í˜¸ì¶œ ì‹œ í˜ì´ì§€ë„¤ì´ì…˜ëœ ìƒí’ˆ ëª©ë¡ ë°˜í™˜
- [x] sort íŒŒë¼ë¯¸í„°ë¡œ ë‹¤ì–‘í•œ ì •ë ¬ ê°€ëŠ¥ (price, name, createdAt ë“±)
- [x] GET /api/products/{id} í˜¸ì¶œ ì‹œ viewCountê°€ 1 ì¦ê°€
- [x] GET /api/products/category/{categoryId} í˜¸ì¶œ ì‹œ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ ìƒí’ˆë§Œ ë°˜í™˜
- [x] GET /api/products/best í˜¸ì¶œ ì‹œ soldCount ë†’ì€ ìˆœìœ¼ë¡œ 16ê°œ ë°˜í™˜
- [x] GET /api/products/new í˜¸ì¶œ ì‹œ ìµœì‹ ìˆœìœ¼ë¡œ 16ê°œ ë°˜í™˜
- [x] GET /api/products/search?q=keyword í˜¸ì¶œ ì‹œ í‚¤ì›Œë“œ í¬í•¨ ìƒí’ˆ ë°˜í™˜
- [x] ëŒ€ì†Œë¬¸ì ë¬´ì‹œí•˜ê³  ê²€ìƒ‰ë¨
- [x] ëª¨ë“  ì´ë¯¸ì§€ê°€ displayOrder ìˆœì„œëŒ€ë¡œ ì •ë ¬ë˜ì–´ ë°˜í™˜ë¨

---

### [BE-025] Product ê³ ê¸‰ í•„í„°ë§ API êµ¬í˜„

**Priority**: ğŸŸ¡ High
**Estimated Time**: 8 hours

#### Description

ê°€ê²© ë²”ìœ„, ì›ì‚°ì§€, ë“±ê¸‰, ì¬ê³  ì—¬ë¶€ ë“± ë‹¤ì–‘í•œ ì¡°ê±´ìœ¼ë¡œ ìƒí’ˆì„ í•„í„°ë§í•˜ëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. Spring Data JPA Specificationì„ ì‚¬ìš©í•˜ì—¬ ë™ì  ì¿¼ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

#### Functional Requirements

**1. ProductSpecification í´ë˜ìŠ¤**
JPA Specificationì„ ì‚¬ìš©í•˜ì—¬ ë™ì  ì¿¼ë¦¬ ì¡°ê±´ì„ ìƒì„±í•˜ëŠ” ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**Static ë©”ì„œë“œë“¤:**

**hasCategory(Long categoryId): Specification<Product>**

- categoryIdê°€ nullì´ë©´ ì¡°ê±´ ì—†ìŒ
- categoryIdê°€ ìˆìœ¼ë©´ category.id = categoryId ì¡°ê±´ ìƒì„±

**priceBetween(BigDecimal minPrice, BigDecimal maxPrice): Specification<Product>**

- minPriceì™€ maxPriceê°€ ëª¨ë‘ nullì´ë©´ ì¡°ê±´ ì—†ìŒ
- ë‘˜ ë‹¤ ìˆìœ¼ë©´: price BETWEEN minPrice AND maxPrice
- minPriceë§Œ ìˆìœ¼ë©´: price >= minPrice
- maxPriceë§Œ ìˆìœ¼ë©´: price <= maxPrice

**hasOrigin(String origin): Specification<Product>**

- originì´ nullì´ë©´ ì¡°ê±´ ì—†ìŒ
- originì´ ìˆìœ¼ë©´ origin = origin ì¡°ê±´ ìƒì„±

**hasGrade(String grade): Specification<Product>**

- gradeê°€ nullì´ë©´ ì¡°ê±´ ì—†ìŒ
- gradeê°€ ìˆìœ¼ë©´ grade = grade ì¡°ê±´ ìƒì„±

**isActive(): Specification<Product>**

- isActive = true ì¡°ê±´ (í•­ìƒ ì ìš©)

**inStock(): Specification<Product>**

- stockQuantity > 0 ì¡°ê±´

**2. ProductRepository í™•ì¥**
JpaSpecificationExecutor ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¶”ê°€ë¡œ í™•ì¥:

- ProductRepository extends JpaRepository<Product, Long>, JpaSpecificationExecutor<Product>
- ì´ë¥¼ í†µí•´ findAll(Specification<Product> spec, Pageable pageable) ë©”ì„œë“œ ì‚¬ìš© ê°€ëŠ¥

**3. ProductFilterRequest DTO**
í´ë¼ì´ì–¸íŠ¸ê°€ í•„í„° ì¡°ê±´ì„ ì „ë‹¬í•˜ê¸° ìœ„í•œ DTOë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**í•„ë“œ:**

- categoryId (Long, optional) - ì¹´í…Œê³ ë¦¬ ID
- minPrice (BigDecimal, optional) - ìµœì†Œ ê°€ê²©
- maxPrice (BigDecimal, optional) - ìµœëŒ€ ê°€ê²©
- origin (String, optional) - ì›ì‚°ì§€
- grade (String, optional) - ë“±ê¸‰
- inStock (Boolean, optional) - ì¬ê³  ìˆëŠ” ìƒí’ˆë§Œ (trueì´ë©´ stockQuantity > 0)
- sortBy (String, default: "createdAt") - ì •ë ¬ í•„ë“œ (price, name, createdAt, soldCount ë“±)
- sortDirection (String, default: "desc") - ì •ë ¬ ë°©í–¥ (asc, desc)

**4. ProductServiceì— í•„í„°ë§ ë©”ì„œë“œ ì¶”ê°€**
filterProducts(ProductFilterRequest filter, Pageable pageable): Page<ProductResponse>

**ì²˜ë¦¬ ë¡œì§:**

1. Specification.where()ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ë³¸ ì¡°ê±´(isActive) ì„¤ì •
2. ê° í•„í„° ì¡°ê±´ì„ and()ë¡œ ì—°ê²°:
   - hasCategory(filter.getCategoryId())
   - priceBetween(filter.getMinPrice(), filter.getMaxPrice())
   - hasOrigin(filter.getOrigin())
   - hasGrade(filter.getGrade())
3. inStockì´ trueì´ë©´ inStock() ì¡°ê±´ ì¶”ê°€
4. sortByì™€ sortDirectionì„ ì‚¬ìš©í•˜ì—¬ Sort ê°ì²´ ìƒì„±
5. Pageableì„ Sortë¡œ ì¬ìƒì„± (PageRequest.of)
6. productRepository.findAll(spec, pageable) í˜¸ì¶œ
7. Page<Product>ë¥¼ Page<ProductResponse>ë¡œ ë³€í™˜

**5. ProductControllerì— í•„í„°ë§ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€**
POST /api/products/filter

**ìš”ì²­:**

- Request Body: ProductFilterRequest (JSON)
- Query Parameters: page, size

**ì‘ë‹µ:**

- ApiResponse<Page<ProductResponse>>

**ì²˜ë¦¬ ë¡œì§:**

- ProductFilterRequest ê²€ì¦
- Pageable ê°ì²´ ìƒì„±
- productService.filterProducts(filter, pageable) í˜¸ì¶œ
- ì‘ë‹µ ë°˜í™˜

**6. Swagger ë¬¸ì„œí™”**
@Operation ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ í•„í„° ì¡°ê±´ ìƒì„¸ ì„¤ëª…

#### API Endpoints

| Method | Endpoint             | Description      | Auth Required |
| ------ | -------------------- | ---------------- | ------------- |
| POST   | /api/products/filter | ìƒí’ˆ ê³ ê¸‰ í•„í„°ë§ | No            |

#### Request Example

```json
{
  "categoryId": 1,
  "minPrice": 10000,
  "maxPrice": 50000,
  "origin": "ê°•ì›ë„ ì–‘ì–‘",
  "grade": "íŠ¹",
  "inStock": true,
  "sortBy": "price",
  "sortDirection": "asc"
}
```

#### Error Handling

- ì˜ëª»ëœ sortBy í•„ë“œ: 400 BAD_REQUEST (JPAì—ì„œ ìë™ ì²˜ë¦¬)
- ì˜ëª»ëœ sortDirection: ê¸°ë³¸ê°’(desc) ì‚¬ìš©

#### Acceptance Criteria

- [x] POST /api/products/filter í˜¸ì¶œ ì‹œ ëª¨ë“  í•„í„° ì¡°ê±´ì´ ANDë¡œ ê²°í•©ë˜ì–´ ì ìš©ë¨
- [x] categoryIdë¡œ í•„í„°ë§ ê°€ëŠ¥
- [x] ê°€ê²© ë²”ìœ„ë¡œ í•„í„°ë§ ê°€ëŠ¥ (minPrice, maxPrice ë…ë¦½ì ìœ¼ë¡œ ë™ì‘)
- [x] ì›ì‚°ì§€ë¡œ í•„í„°ë§ ê°€ëŠ¥
- [x] ë“±ê¸‰ìœ¼ë¡œ í•„í„°ë§ ê°€ëŠ¥
- [x] inStock=true ì‹œ ì¬ê³  ìˆëŠ” ìƒí’ˆë§Œ ë°˜í™˜
- [x] sortByì™€ sortDirectionìœ¼ë¡œ ì •ë ¬ ê°€ëŠ¥
- [x] ëª¨ë“  í•„í„° ì¡°ê±´ì´ optional (nullì´ë©´ ì¡°ê±´ ë¬´ì‹œ)
- [x] ì—¬ëŸ¬ ì¡°ê±´ ë™ì‹œ ì ìš© ê°€ëŠ¥
- [x] í˜ì´ì§€ë„¤ì´ì…˜ ì •ìƒ ë™ì‘

---

### [BE-026] AWS S3 ì´ë¯¸ì§€ ì—…ë¡œë“œ êµ¬í˜„

**Priority**: ğŸ”´ Critical
**Estimated Time**: 10 hours

#### Description

AWS S3ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒí’ˆ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê³  ì‚­ì œí•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤. ì—…ë¡œë“œëœ ì´ë¯¸ì§€ì˜ URLì„ ë°˜í™˜í•˜ì—¬ ProductImage Entityì— ì €ì¥í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

#### Functional Requirements

**1. AWS SDK ì˜ì¡´ì„± ì¶”ê°€**
build.gradleì— ë‹¤ìŒ ì˜ì¡´ì„± ì¶”ê°€:

- software.amazon.awssdk:s3 (ë²„ì „ 2.20.0 ì´ìƒ)
- software.amazon.awssdk:auth

**2. application.yml ì„¤ì •**
AWS S3 ê´€ë ¨ ì„¤ì •ì„ ì¶”ê°€í•©ë‹ˆë‹¤:

```yaml
aws:
  s3:
    bucket-name: esonge-product-images
    region: ap-northeast-2
  credentials:
    access-key: ${AWS_ACCESS_KEY_ID}
    secret-key: ${AWS_SECRET_ACCESS_KEY}
```

**í™˜ê²½ ë³€ìˆ˜:**

- AWS_ACCESS_KEY_ID - IAM ì‚¬ìš©ì Access Key
- AWS_SECRET_ACCESS_KEY - IAM ì‚¬ìš©ì Secret Key

**3. S3Config í´ë˜ìŠ¤**
S3Client Beanì„ ìƒì„±í•˜ëŠ” Configuration í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**ì„¤ì • ë‚´ìš©:**

- @Valueë¡œ application.ymlì˜ ê°’ ì£¼ì… (region, access-key, secret-key)
- AwsBasicCredentials ìƒì„± (accessKey, secretKey)
- S3Client.builder() ì‚¬ìš©:
  - region ì„¤ì • (Region.of(region))
  - credentialsProvider ì„¤ì • (StaticCredentialsProvider.create(credentials))
- @Beanìœ¼ë¡œ S3Client ë“±ë¡

**4. S3Service í´ë˜ìŠ¤**
S3 íŒŒì¼ ì—…ë¡œë“œ/ì‚­ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” Serviceë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**uploadFile(MultipartFile file, String folder): String**

**ì²˜ë¦¬ ë¡œì§:**

1. originalFilenameì—ì„œ íŒŒì¼ í™•ì¥ì ì¶”ì¶œ
2. ê³ ìœ í•œ íŒŒì¼ëª… ìƒì„±: folder + "/" + UUID.randomUUID() + extension
   - ì˜ˆ: "products/a1b2c3d4-e5f6-7890-abcd-ef1234567890.jpg"
3. PutObjectRequest ìƒì„±:
   - bucket(bucketName)
   - key(fileName)
   - contentType(file.getContentType())
   - contentLength(file.getSize())
4. s3Client.putObject(request, RequestBody.fromInputStream(...)) í˜¸ì¶œ
5. ì—…ë¡œë“œ ì„±ê³µ ì‹œ S3 URL ë°˜í™˜: getFileUrl(fileName)
6. IOException ë°œìƒ ì‹œ FileUploadException ë°œìƒ

**deleteFile(String fileUrl): void**

**ì²˜ë¦¬ ë¡œì§:**

1. fileUrlì—ì„œ fileName ì¶”ì¶œ (extractFileNameFromUrl)
2. DeleteObjectRequest ìƒì„±:
   - bucket(bucketName)
   - key(fileName)
3. s3Client.deleteObject(request) í˜¸ì¶œ
4. ì˜ˆì™¸ ë°œìƒ ì‹œ FileDeleteException ë°œìƒ

**í—¬í¼ ë©”ì„œë“œ:**

- getFileUrl(String fileName): String
  - "https://{bucketName}.s3.{region}.amazonaws.com/{fileName}" í˜•ì‹ ë°˜í™˜
- extractFileNameFromUrl(String fileUrl): String
  - URLì—ì„œ íŒŒì¼ëª… ì¶”ì¶œ (ë§ˆì§€ë§‰ "/" ì´í›„ ë¶€ë¶„)

**ë¡œê¹…:**

- @Slf4j ì‚¬ìš©
- ì—…ë¡œë“œ/ì‚­ì œ ì‹¤íŒ¨ ì‹œ error ë¡œê·¸ ì¶œë ¥

**5. ImageUploadController**
ì´ë¯¸ì§€ ì—…ë¡œë“œ/ì‚­ì œ APIë¥¼ ì œê³µí•˜ëŠ” Controllerë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**POST /api/images/upload - ì´ë¯¸ì§€ ì—…ë¡œë“œ**

**ìš”ì²­:**

- @RequestParam("file") MultipartFile file - ì—…ë¡œë“œí•  íŒŒì¼
- @RequestParam(defaultValue = "products") String folder - ì €ì¥í•  í´ë”

**ê²€ì¦:**

1. íŒŒì¼ì´ ë¹„ì–´ìˆëŠ”ì§€ í™•ì¸ (file.isEmpty())
   - ë¹„ì–´ìˆìœ¼ë©´ ValidationException ë°œìƒ
2. ContentTypeì´ "image/"ë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸
   - ì•„ë‹ˆë©´ ValidationException("File must be an image") ë°œìƒ
3. íŒŒì¼ í¬ê¸°ê°€ 5MB ì´í•˜ì¸ì§€ í™•ì¸ (file.getSize() <= 5 _ 1024 _ 1024)
   - ì´ˆê³¼í•˜ë©´ ValidationException("File size must not exceed 5MB") ë°œìƒ

**ì²˜ë¦¬:**

- s3Service.uploadFile(file, folder) í˜¸ì¶œ
- ImageUploadResponse ìƒì„±:
  - imageUrl (S3 URL)
  - fileName (ì›ë³¸ íŒŒì¼ëª…)
  - fileSize (íŒŒì¼ í¬ê¸°)
- ApiResponse<ImageUploadResponse> ë°˜í™˜ (200 OK)

**DELETE /api/images - ì´ë¯¸ì§€ ì‚­ì œ**

**ìš”ì²­:**

- @RequestParam String imageUrl - ì‚­ì œí•  ì´ë¯¸ì§€ S3 URL

**ì²˜ë¦¬:**

- s3Service.deleteFile(imageUrl) í˜¸ì¶œ
- ApiResponse<Void> ë°˜í™˜ (200 OK, message: "Image deleted successfully")

**6. ImageUploadResponse DTO**
ì´ë¯¸ì§€ ì—…ë¡œë“œ ì„±ê³µ ì‹œ ë°˜í™˜í•  DTO:

- imageUrl (String) - S3 URL
- fileName (String) - ì›ë³¸ íŒŒì¼ëª…
- fileSize (Long) - íŒŒì¼ í¬ê¸° (bytes)

**7. ì˜ˆì™¸ í´ë˜ìŠ¤**

- FileUploadException extends RuntimeException
- FileDeleteException extends RuntimeException

**8. Swagger ë¬¸ì„œí™”**
@Operation ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ íŒŒì¼ ì—…ë¡œë“œ ë°©ë²• ì„¤ëª…

#### API Endpoints

| Method | Endpoint           | Description        | Auth Required       |
| ------ | ------------------ | ------------------ | ------------------- |
| POST   | /api/images/upload | ì´ë¯¸ì§€ ì—…ë¡œë“œ (S3) | No (ì¶”í›„ ì¸ì¦ ì¶”ê°€) |
| DELETE | /api/images        | ì´ë¯¸ì§€ ì‚­ì œ (S3)   | No (ì¶”í›„ ì¸ì¦ ì¶”ê°€) |

#### Error Handling

- íŒŒì¼ ì—†ìŒ: 400 BAD_REQUEST, "File is empty"
- ì´ë¯¸ì§€ íŒŒì¼ ì•„ë‹˜: 400 BAD_REQUEST, "File must be an image"
- íŒŒì¼ í¬ê¸° ì´ˆê³¼: 400 BAD_REQUEST, "File size must not exceed 5MB"
- S3 ì—…ë¡œë“œ ì‹¤íŒ¨: 500 INTERNAL_SERVER_ERROR, "Failed to upload file"
- S3 ì‚­ì œ ì‹¤íŒ¨: 500 INTERNAL_SERVER_ERROR, "Failed to delete file"

#### Acceptance Criteria

- [x] POST /api/images/upload í˜¸ì¶œ ì‹œ íŒŒì¼ì´ S3ì— ì—…ë¡œë“œë¨
- [x] ì—…ë¡œë“œ ì„±ê³µ ì‹œ S3 URLì´ ë°˜í™˜ë¨
- [x] íŒŒì¼ëª…ì´ UUIDë¡œ ìƒì„±ë˜ì–´ ì¤‘ë³µ ë°©ì§€ë¨
- [x] folder íŒŒë¼ë¯¸í„°ë¡œ ì €ì¥ ìœ„ì¹˜ ì§€ì • ê°€ëŠ¥
- [x] ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥ (contentType ê²€ì¦)
- [x] íŒŒì¼ í¬ê¸° 5MB ì œí•œì´ ì ìš©ë¨
- [x] DELETE /api/images í˜¸ì¶œ ì‹œ S3ì—ì„œ íŒŒì¼ì´ ì‚­ì œë¨
- [x] S3 URLë¡œ ì´ë¯¸ì§€ ì ‘ê·¼ ê°€ëŠ¥ (public-read ê¶Œí•œ ì„¤ì • í•„ìš”)
- [x] ì˜ˆì™¸ ë°œìƒ ì‹œ ì ì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€ ë°˜í™˜

**Note**: S3 ë²„í‚·ì€ public-read ACL ë˜ëŠ” ë²„í‚· ì •ì±…ì„ í†µí•´ public ì ‘ê·¼ í—ˆìš© í•„ìš”

---

### [BE-027] Product CRUD API êµ¬í˜„ (Admin)

**Priority**: ğŸŸ¢ Medium
**Estimated Time**: 8 hours

#### Description

ê´€ë¦¬ìê°€ ìƒí’ˆì„ ìƒì„±, ìˆ˜ì •, ì‚­ì œí•  ìˆ˜ ìˆëŠ” APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. í˜„ì¬ëŠ” ì¸ì¦ ì—†ì´ êµ¬í˜„í•˜ë©°, ì¶”í›„ ê´€ë¦¬ì ê¶Œí•œ ê²€ì¦ì„ ì¶”ê°€í•  ì˜ˆì •ì…ë‹ˆë‹¤.

#### Functional Requirements

**1. ProductCreateRequest DTO**
ìƒí’ˆ ìƒì„±/ìˆ˜ì • ì‹œ í´ë¼ì´ì–¸íŠ¸ê°€ ì „ë‹¬í•˜ëŠ” ë°ì´í„° DTOë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**í•„ë“œ ë° Validation:**

- name (String, @NotBlank) - ìƒí’ˆëª…
- slug (String, @NotBlank) - URL ì¹œí™”ì  ì‹ë³„ì
- description (String) - ìƒí’ˆ ì„¤ëª…
- price (BigDecimal, @NotNull, @DecimalMin("0.00")) - ì •ê°€
- salePrice (BigDecimal, optional) - í• ì¸ê°€
- wholesalePrice (BigDecimal, optional) - ë„ë§¤ê°€
- stockQuantity (Integer, @Min(0), default: 0) - ì¬ê³  ìˆ˜ëŸ‰
- categoryId (Long, @NotNull) - ì¹´í…Œê³ ë¦¬ ID
- origin (String, optional) - ì›ì‚°ì§€
- grade (String, optional) - ë“±ê¸‰
- weight (String, optional) - ì¤‘ëŸ‰
- packaging (String, optional) - í¬ì¥ ë‹¨ìœ„
- isFeatured (Boolean, optional, default: false) - ì¶”ì²œ ìƒí’ˆ
- isNew (Boolean, optional, default: false) - ì‹ ìƒí’ˆ
- isBest (Boolean, optional, default: false) - ë² ìŠ¤íŠ¸ ìƒí’ˆ
- imageUrls (List<String>, optional) - S3 ì´ë¯¸ì§€ URL ëª©ë¡

**ì»¤ìŠ¤í…€ Validation (ì„ íƒ ì‚¬í•­):**

- salePriceê°€ ì œê³µë˜ë©´ priceë³´ë‹¤ ì‘ì•„ì•¼ í•¨
- wholesalePriceê°€ ì œê³µë˜ë©´ salePriceë³´ë‹¤ ì‘ì•„ì•¼ í•¨

**2. ProductServiceì— CUD ë©”ì„œë“œ ì¶”ê°€**

**createProduct(ProductCreateRequest request): ProductResponse**

**ì²˜ë¦¬ ë¡œì§:**

1. categoryIdë¡œ Category ì¡°íšŒ
   - ì—†ìœ¼ë©´ NotFoundException("Category not found") ë°œìƒ
2. Product Entity ìƒì„± ë° í•„ë“œ ì„¤ì •:
   - Request DTOì˜ ëª¨ë“  í•„ë“œë¥¼ Entityì— ë³µì‚¬
   - category ì„¤ì •
   - isActive = true (ê¸°ë³¸ê°’)
3. imageUrlsê°€ ì œê³µë˜ë©´:
   - ê° URLì— ëŒ€í•´ ProductImage Entity ìƒì„±
   - displayOrder = ë°°ì—´ ì¸ë±ìŠ¤ (0, 1, 2, ...)
   - product.addImage(image) í˜¸ì¶œ (ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ ì„¤ì •)
4. productRepository.save(product) í˜¸ì¶œ
5. ProductResponse.from(savedProduct) ë°˜í™˜
6. @Transactional ì ìš©

**updateProduct(Long id, ProductCreateRequest request): ProductResponse**

**ì²˜ë¦¬ ë¡œì§:**

1. idë¡œ Product ì¡°íšŒ
   - ì—†ìœ¼ë©´ NotFoundException("Product not found") ë°œìƒ
2. categoryIdë¡œ Category ì¡°íšŒ
   - ì—†ìœ¼ë©´ NotFoundException("Category not found") ë°œìƒ
3. Product Entity í•„ë“œ ì—…ë°ì´íŠ¸:
   - Request DTOì˜ ëª¨ë“  í•„ë“œë¡œ ê¸°ì¡´ ê°’ ë®ì–´ì“°ê¸°
   - category ì—…ë°ì´íŠ¸
4. ê¸°ì¡´ ì´ë¯¸ì§€ ì‚­ì œ: product.getImages().clear()
5. imageUrlsê°€ ì œê³µë˜ë©´:
   - ìƒˆ ProductImage Entity ìƒì„± ë° ì¶”ê°€
   - displayOrder ì¬ì„¤ì •
6. JPAê°€ ìë™ìœ¼ë¡œ ë³€ê²½ ê°ì§€í•˜ì—¬ UPDATE ì¿¼ë¦¬ ì‹¤í–‰
7. ProductResponse.from(product) ë°˜í™˜
8. @Transactional ì ìš©

**deleteProduct(Long id): void**

**ì²˜ë¦¬ ë¡œì§:**

1. idë¡œ Product ì¡°íšŒ
   - ì—†ìœ¼ë©´ NotFoundException("Product not found") ë°œìƒ
2. Soft Delete ì²˜ë¦¬: product.setIsActive(false)
3. JPAê°€ ìë™ìœ¼ë¡œ ë³€ê²½ ê°ì§€í•˜ì—¬ UPDATE ì¿¼ë¦¬ ì‹¤í–‰
4. @Transactional ì ìš©

**Note**: Hard DeleteëŠ” í•˜ì§€ ì•ŠìŒ (ì£¼ë¬¸ ì´ë ¥ ë³´ì¡´)

**3. ProductControllerì— Admin ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€**

**POST /api/products - ìƒí’ˆ ìƒì„±**

**ìš”ì²­:**

- Request Body: ProductCreateRequest (@Valid ê²€ì¦)

**ì²˜ë¦¬:**

- productService.createProduct(request) í˜¸ì¶œ
- ApiResponse<ProductResponse> ë°˜í™˜
- HTTP Status: 201 Created
- Message: "Product created successfully"

**PUT /api/products/{id} - ìƒí’ˆ ìˆ˜ì •**

**ìš”ì²­:**

- Path Variable: id (Long)
- Request Body: ProductCreateRequest (@Valid ê²€ì¦)

**ì²˜ë¦¬:**

- productService.updateProduct(id, request) í˜¸ì¶œ
- ApiResponse<ProductResponse> ë°˜í™˜
- HTTP Status: 200 OK
- Message: "Product updated successfully"

**DELETE /api/products/{id} - ìƒí’ˆ ì‚­ì œ (Soft Delete)**

**ìš”ì²­:**

- Path Variable: id (Long)

**ì²˜ë¦¬:**

- productService.deleteProduct(id) í˜¸ì¶œ
- ApiResponse<Void> ë°˜í™˜
- HTTP Status: 200 OK
- Message: "Product deleted successfully"

**4. Swagger ë¬¸ì„œí™”**
@Operation ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ Admin ì „ìš© APIì„ì„ ëª…ì‹œ

#### API Endpoints

| Method | Endpoint           | Description             | Auth Required |
| ------ | ------------------ | ----------------------- | ------------- |
| POST   | /api/products      | ìƒí’ˆ ìƒì„± (Admin)       | No (ì¶”í›„ Yes) |
| PUT    | /api/products/{id} | ìƒí’ˆ ìˆ˜ì • (Admin)       | No (ì¶”í›„ Yes) |
| DELETE | /api/products/{id} | ìƒí’ˆ ì‚­ì œ (Admin, Soft) | No (ì¶”í›„ Yes) |

#### Error Handling

- ì¹´í…Œê³ ë¦¬ ì—†ìŒ: 404 NOT_FOUND, "CATEGORY_NOT_FOUND"
- ìƒí’ˆ ì—†ìŒ: 404 NOT_FOUND, "PRODUCT_NOT_FOUND"
- Validation ì‹¤íŒ¨: 400 BAD_REQUEST, "VALIDATION_ERROR" + details
- ì¤‘ë³µ slug: 409 CONFLICT, "SLUG_ALREADY_EXISTS"

#### Acceptance Criteria

- [x] POST /api/products í˜¸ì¶œ ì‹œ ìƒí’ˆì´ DBì— ìƒì„±ë¨
- [x] imageUrlsë¥¼ ì œê³µí•˜ë©´ ProductImageê°€ í•¨ê»˜ ìƒì„±ë¨
- [x] imageUrlsì˜ ìˆœì„œëŒ€ë¡œ displayOrderê°€ ì„¤ì •ë¨
- [x] PUT /api/products/{id} í˜¸ì¶œ ì‹œ ê¸°ì¡´ ìƒí’ˆì´ ì—…ë°ì´íŠ¸ë¨
- [x] ì´ë¯¸ì§€ ìˆ˜ì • ì‹œ ê¸°ì¡´ ì´ë¯¸ì§€ê°€ ì‚­ì œë˜ê³  ìƒˆ ì´ë¯¸ì§€ë¡œ êµì²´ë¨
- [x] DELETE /api/products/{id} í˜¸ì¶œ ì‹œ isActive=falseë¡œ ë³€ê²½ë¨ (Soft Delete)
- [x] Soft Delete í›„ ì¡°íšŒ APIì—ì„œ í•´ë‹¹ ìƒí’ˆì´ ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŒ
- [x] Bean Validationì´ ì ìš©ë˜ì–´ ì˜ëª»ëœ ë°ì´í„°ëŠ” ê±°ë¶€ë¨
- [x] 201 Created, 200 OK ìƒíƒœ ì½”ë“œê°€ ì˜¬ë°”ë¥´ê²Œ ë°˜í™˜ë¨

---

### [BE-028] ìƒ˜í”Œ ë°ì´í„° ì´ˆê¸°í™” (Seed Data)

**Priority**: ğŸŸ¢ Medium
**Estimated Time**: 4 hours

#### Description

í…ŒìŠ¤íŠ¸ ë° í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ì„ ìœ„í•œ ì¹´í…Œê³ ë¦¬ ë° ìƒí’ˆ ìƒ˜í”Œ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤. ê°œë°œ í™˜ê²½ì—ì„œë§Œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.

#### Functional Requirements

**1. DataLoader í´ë˜ìŠ¤**
CommandLineRunner ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ ë°ì´í„°ë¥¼ ë¡œë“œí•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤:

**ì„¤ì •:**

- @Component ì–´ë…¸í…Œì´ì…˜
- @RequiredArgsConstructor (ì˜ì¡´ì„± ì£¼ì…)
- @Profile("dev") - ê°œë°œ í™˜ê²½ì—ì„œë§Œ ì‹¤í–‰
- @Slf4j - ë¡œê¹…

**ì˜ì¡´ì„±:**

- CategoryRepository
- ProductRepository

**run(String... args) ë©”ì„œë“œ êµ¬í˜„:**

**ì‹¤í–‰ ì¡°ê±´:**

- categoryRepository.count() == 0ì¸ ê²½ìš°ì—ë§Œ ì‹¤í–‰
- ì´ë¯¸ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì¤‘ë³µ ìƒì„± ë°©ì§€

**ì‹¤í–‰ ìˆœì„œ:**

1. loadCategories() í˜¸ì¶œ
2. loadProducts() í˜¸ì¶œ
3. ë¡œê·¸ ì¶œë ¥: "Sample data loaded successfully"

**2. loadCategories() ë©”ì„œë“œ**
ë‹¤ìŒ ì¹´í…Œê³ ë¦¬ë“¤ì„ ìƒì„±í•©ë‹ˆë‹¤:

**ìµœìƒìœ„ ì¹´í…Œê³ ë¦¬ (8ê°œ):**

1. ì†¡ì´ë²„ì„¯
   - slug: "matsutake"
   - description: "í”„ë¦¬ë¯¸ì—„ ê°•ì›ë„ ì†¡ì´ë²„ì„¯"
   - displayOrder: 1

2. ì‚°ì–‘ì‚¼
   - slug: "wild-ginseng"
   - description: "ì²œì—° ì‚°ì–‘ì‚¼"
   - displayOrder: 2

3. ê±´ê°•ì‹í’ˆ
   - slug: "health-food"
   - description: "ê°•ì›ë„ íŠ¹ì‚° ê±´ê°•ì‹í’ˆ"
   - displayOrder: 3

4. ë†ì‚°ë¬¼
   - slug: "farm-products"
   - description: "ì‹ ì„ í•œ ë†ì‚°ë¬¼"
   - displayOrder: 4

5. ìˆ˜ì‚°ë¬¼
   - slug: "seafood"
   - description: "ë™í•´ì•ˆ ìˆ˜ì‚°ë¬¼"
   - displayOrder: 5

6. ì¶•ì‚°ë¬¼
   - slug: "livestock"
   - description: "ì²­ì • ì¶•ì‚°ë¬¼"
   - displayOrder: 6

7. ê°€ê³µì‹í’ˆ
   - slug: "processed-food"
   - description: "ì „í†µ ê°€ê³µì‹í’ˆ"
   - displayOrder: 7

8. ì„ ë¬¼ì„¸íŠ¸
   - slug: "gift-sets"
   - description: "í”„ë¦¬ë¯¸ì—„ ì„ ë¬¼ì„¸íŠ¸"
   - displayOrder: 8

**ê° ì¹´í…Œê³ ë¦¬ ìƒì„± í›„ categoryRepository.save() í˜¸ì¶œ**

**3. loadProducts() ë©”ì„œë“œ**
ê° ì¹´í…Œê³ ë¦¬ë³„ë¡œ ìµœì†Œ 3-4ê°œì˜ ìƒ˜í”Œ ìƒí’ˆì„ ìƒì„±í•©ë‹ˆë‹¤ (ì´ 30ê°œ ì´ìƒ):

**ìƒí’ˆ ì˜ˆì‹œ (ì†¡ì´ë²„ì„¯ ì¹´í…Œê³ ë¦¬):**

**ìƒí’ˆ 1: ê°•ì›ë„ ì–‘ì–‘ ì†¡ì´ë²„ì„¯ íŠ¹**

- slug: "yangyang-matsutake-premium"
- description: "ê°•ì›ë„ ì–‘ì–‘ì—ì„œ ì§ì†¡í•˜ëŠ” ìµœê³ ê¸‰ ì†¡ì´ë²„ì„¯ì…ë‹ˆë‹¤. í–¥ì´ ì§„í•˜ê³  ìœ¡ì§ˆì´ ë‹¨ë‹¨í•©ë‹ˆë‹¤."
- price: 150,000ì›
- salePrice: 135,000ì›
- stockQuantity: 50
- origin: "ê°•ì›ë„ ì–‘ì–‘"
- grade: "íŠ¹"
- weight: "500g"
- packaging: "ì„ ë¬¼ìš© ë°•ìŠ¤"
- isFeatured: true
- isBest: true
- isNew: false
- images: 2-3ê°œ (placeholder URL)

**ìƒí’ˆ 2: ê°•ì›ë„ ì¸ì œ ì†¡ì´ë²„ì„¯ ìƒ**

- ìœ ì‚¬í•œ í˜•ì‹ìœ¼ë¡œ ì„¤ì •, grade: "ìƒ", ê°€ê²© ë‚®ì¶¤

**ìƒí’ˆ 3: ì†¡ì´ë²„ì„¯ ì„ ë¬¼ì„¸íŠ¸**

- ì„ ë¬¼ì„¸íŠ¸ í˜•íƒœ, ê³ ê°€ê²©, isFeatured: true

**ë‹¤ë¥¸ ì¹´í…Œê³ ë¦¬ ìƒí’ˆë„ ìœ ì‚¬í•˜ê²Œ ìƒì„±:**

- ì‚°ì–‘ì‚¼: ë‹¤ì–‘í•œ ë…„ê·¼ (6ë…„ê·¼, 8ë…„ê·¼, 10ë…„ê·¼)
- ë†ì‚°ë¬¼: ìŒ€, ì±„ì†Œ, ê³¼ì¼
- ìˆ˜ì‚°ë¬¼: ì˜¤ì§•ì–´, ëª…íƒœ, ì „ë³µ
- ì¶•ì‚°ë¬¼: í•œìš°, ë¼ì§€ê³ ê¸°, ë‹­ê³ ê¸°
- ê°€ê³µì‹í’ˆ: ê¹€ì¹˜, ì¥ë¥˜, ì “ê°ˆ
- ì„ ë¬¼ì„¸íŠ¸: ë‹¤ì–‘í•œ êµ¬ì„±

**ìƒí’ˆ ì´ë¯¸ì§€:**

- Placeholder ì´ë¯¸ì§€ URL ì‚¬ìš© (ì˜ˆ: "https://via.placeholder.com/600x400?text=Product+Name")
- ë˜ëŠ” ì‹¤ì œ S3ì— ì—…ë¡œë“œí•œ ìƒ˜í”Œ ì´ë¯¸ì§€ URL
- ê° ìƒí’ˆë‹¹ 2-3ê°œ ì´ë¯¸ì§€

**íŠ¹ìˆ˜ í”Œë˜ê·¸ ì„¤ì •:**

- ê° ì¹´í…Œê³ ë¦¬ë³„ë¡œ 1-2ê°œëŠ” isBest = true
- ìµœê·¼ ìƒì„±ëœ ìƒí’ˆ 10ê°œëŠ” isNew = true
- ì¶”ì²œ ìƒí’ˆ 5ê°œëŠ” isFeatured = true

**4. ë°ì´í„° ì¼ê´€ì„±**

- ëª¨ë“  ìƒí’ˆì— ì¹´í…Œê³ ë¦¬ ì—°ê²°
- ëª¨ë“  ìƒí’ˆì— ìµœì†Œ 1ê°œ ì´ìƒì˜ ì´ë¯¸ì§€
- ê°€ê²© ì •ë³´ ì¼ê´€ì„± ìœ ì§€ (salePrice < price)
- ì¬ê³  ìˆ˜ëŸ‰ ëœë¤ ì„¤ì • (10 ~ 100)

**5. ë¡œê¹…**

- ê° ì¹´í…Œê³ ë¦¬ ìƒì„± í›„ ë¡œê·¸: "Created category: {name}"
- ê° ìƒí’ˆ ìƒì„± í›„ ë¡œê·¸: "Created product: {name}"
- ìµœì¢… ë¡œê·¸: "Sample data loaded: {categoryCount} categories, {productCount} products"

#### API Endpoints

í•´ë‹¹ ì—†ìŒ (ë°ì´í„° ë¡œë”)

#### Error Handling

- ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨ ì‹œ ë¡œê·¸ ì¶œë ¥ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì† ì‹¤í–‰
- ì¤‘ë³µ slug ë“± ì œì•½ ì¡°ê±´ ìœ„ë°˜ ì‹œ í•´ë‹¹ ë°ì´í„° skip

#### Acceptance Criteria

- [x] ê°œë°œ í™˜ê²½(@Profile("dev"))ì—ì„œë§Œ ì‹¤í–‰ë¨
- [x] í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
- [x] categoryRepository.count() == 0ì¼ ë•Œë§Œ ì‹¤í–‰ë¨
- [x] 8ê°œ ì¹´í…Œê³ ë¦¬ ìƒì„±ë¨
- [x] 30ê°œ ì´ìƒì˜ ìƒí’ˆ ìƒì„±ë¨
- [x] ëª¨ë“  ìƒí’ˆì— ì¹´í…Œê³ ë¦¬ ì—°ê²°ë¨
- [x] ëª¨ë“  ìƒí’ˆì— ìµœì†Œ 1ê°œ ì´ìƒì˜ ì´ë¯¸ì§€ í¬í•¨
- [x] isBest, isNew, isFeatured í”Œë˜ê·¸ê°€ ì ì ˆíˆ ì„¤ì •ë¨
- [x] ë¡œê·¸ì— "Sample data loaded successfully" ì¶œë ¥
- [x] ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ì‹œì‘ ì‹œ ì¤‘ë³µ ìƒì„±ë˜ì§€ ì•ŠìŒ

---

## ğŸ“Š Week 5-8 Summary

### Deliverables

- âœ… Category Entity ë° Repository (ê³„ì¸µ êµ¬ì¡° ì§€ì›)
- âœ… Product, ProductImage Entity ë° Repository
- âœ… Category ì¡°íšŒ API (ê³„ì¸µ êµ¬ì¡° ì „ì²´ ì¡°íšŒ)
- âœ… Product ì¡°íšŒ API (ëª©ë¡, ìƒì„¸, ì¹´í…Œê³ ë¦¬ë³„, ê²€ìƒ‰)
- âœ… Product ê³ ê¸‰ í•„í„°ë§ (JPA Specification)
- âœ… AWS S3 ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ì‚­ì œ
- âœ… Product CRUD API (Admin, ì¶”í›„ ì¸ì¦ ì¶”ê°€)
- âœ… ìƒ˜í”Œ ë°ì´í„° ë¡œë” (CommandLineRunner, @Profile("dev"))

### Key Endpoints (Week 5-8)

| Method | Endpoint                            | Description              | Auth Required |
| ------ | ----------------------------------- | ------------------------ | ------------- |
| GET    | /api/categories                     | ì¹´í…Œê³ ë¦¬ ê³„ì¸µ êµ¬ì¡° ì¡°íšŒ  | No            |
| GET    | /api/categories/{id}                | ì¹´í…Œê³ ë¦¬ ìƒì„¸ ì¡°íšŒ       | No            |
| GET    | /api/categories/slug/{slug}         | slugë¡œ ì¹´í…Œê³ ë¦¬ ì¡°íšŒ     | No            |
| GET    | /api/products                       | ìƒí’ˆ ëª©ë¡ (í˜ì´ì§€ë„¤ì´ì…˜) | No            |
| GET    | /api/products/{id}                  | ìƒí’ˆ ìƒì„¸ ì¡°íšŒ           | No            |
| GET    | /api/products/slug/{slug}           | slugë¡œ ìƒí’ˆ ì¡°íšŒ         | No            |
| GET    | /api/products/category/{categoryId} | ì¹´í…Œê³ ë¦¬ë³„ ìƒí’ˆ          | No            |
| GET    | /api/products/featured              | ì¶”ì²œ ìƒí’ˆ ì¡°íšŒ           | No            |
| GET    | /api/products/best                  | ë² ìŠ¤íŠ¸ ìƒí’ˆ 16ê°œ         | No            |
| GET    | /api/products/new                   | ì‹ ìƒí’ˆ 16ê°œ              | No            |
| GET    | /api/products/search                | í‚¤ì›Œë“œ ê²€ìƒ‰              | No            |
| POST   | /api/products/filter                | ê³ ê¸‰ í•„í„°ë§              | No            |
| POST   | /api/images/upload                  | ì´ë¯¸ì§€ ì—…ë¡œë“œ (S3)       | No (ì¶”í›„ Yes) |
| DELETE | /api/images                         | ì´ë¯¸ì§€ ì‚­ì œ (S3)         | No (ì¶”í›„ Yes) |
| POST   | /api/products                       | ìƒí’ˆ ìƒì„± (Admin)        | No (ì¶”í›„ Yes) |
| PUT    | /api/products/{id}                  | ìƒí’ˆ ìˆ˜ì • (Admin)        | No (ì¶”í›„ Yes) |
| DELETE | /api/products/{id}                  | ìƒí’ˆ ì‚­ì œ (Admin, Soft)  | No (ì¶”í›„ Yes) |

### Frontend Integration Ready (Week 8)

í”„ë¡ íŠ¸ì—”ë“œ íŒ€ì´ ë‹¤ìŒ ê¸°ëŠ¥ì„ ì—°ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- ì¹´í…Œê³ ë¦¬ ë„¤ë¹„ê²Œì´ì…˜ (ê³„ì¸µ êµ¬ì¡°)
- ìƒí’ˆ ëª©ë¡ í˜ì´ì§€ (ê·¸ë¦¬ë“œ/ë¦¬ìŠ¤íŠ¸ ë·°, í˜ì´ì§€ë„¤ì´ì…˜)
- ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ (ì´ë¯¸ì§€ ìºëŸ¬ì…€, ì˜µì…˜ ì„ íƒ)
- ê²€ìƒ‰ ë° í•„í„°ë§ (ê°€ê²©, ì›ì‚°ì§€, ë“±ê¸‰, ì¬ê³ )
- ë² ìŠ¤íŠ¸/ì‹ ìƒí’ˆ/ì¶”ì²œ ìƒí’ˆ ì„¹ì…˜
- ì •ë ¬ ê¸°ëŠ¥ (ê°€ê²©ìˆœ, ì¸ê¸°ìˆœ, ìµœì‹ ìˆœ)

### Database Schema

**í…Œì´ë¸”:**

- categories (ì¹´í…Œê³ ë¦¬, ìê¸° ì°¸ì¡° ê³„ì¸µ êµ¬ì¡°)
- products (ìƒí’ˆ, category FK)
- product_images (ìƒí’ˆ ì´ë¯¸ì§€, product FK)

**ì¸ë±ìŠ¤:**

- categories: parent_id, slug
- products: category_id, slug, is_featured, is_best
- product_images: product_id

### Technical Highlights

- **JPA ê³„ì¸µ êµ¬ì¡°**: self-referencing Many-to-One/One-to-Many
- **Lazy Loading**: N+1 ë¬¸ì œ ë°©ì§€ (JOIN FETCH ì‚¬ìš©)
- **JPA Specification**: ë™ì  ì¿¼ë¦¬ ìƒì„±
- **AWS S3 Integration**: SDK 2.x ì‚¬ìš©
- **Soft Delete**: isActive í”Œë˜ê·¸ë¡œ ë…¼ë¦¬ ì‚­ì œ
- **Pagination**: Spring Data Pageable ì‚¬ìš©
- **Auditing**: @CreatedDate, @LastModifiedDate ìë™ ê´€ë¦¬

### Next Steps (Week 9-12)

- ë§ˆì¼ë¦¬ì§€ ì‹œìŠ¤í…œ (ì ë¦½/ì‚¬ìš©/ë§Œë£Œ)
- ì˜ˆì¹˜ê¸ˆ ì‹œìŠ¤í…œ (ì¶©ì „/ì‚¬ìš©/í™˜ë¶ˆ)
- ì¿ í° ì‹œìŠ¤í…œ (ë°œê¸‰/ì‚¬ìš©/ë§Œë£Œ)
- ìœ„ì‹œë¦¬ìŠ¤íŠ¸ (ì°œ ê¸°ëŠ¥)
- íšŒì› ë“±ê¸‰ ê´€ë¦¬ (BASIC/VIP/WHOLESALE)

---

**Documentation Style**: ì´ ë¬¸ì„œëŠ” ëª…ì‹œì ì¸ ì½”ë“œ ì˜ˆì‹œ ì—†ì´ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ì„ í…ìŠ¤íŠ¸ë¡œ ìƒì„¸íˆ ì„¤ëª…í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ê°œë°œìëŠ” ì´ ìš”êµ¬ì‚¬í•­ì„ ì½ê³  Java/Spring Boot ê¸°ë°˜ìœ¼ë¡œ ì§ì ‘ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
